<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/mongodb/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#description">Description</a>
      </div>

      <div class="heading h2">
        <a href="#mongodb-node.js-driver">MongoDB Node.JS Driver</a>
      </div>

      <div class="heading h3">
        <a href="#bugs-feature-requests">Bugs / Feature Requests</a>
      </div>

      <div class="heading h3">
        <a href="#support-feedback">Support / Feedback</a>
      </div>

      <div class="heading h3">
        <a href="#change-log">Change Log</a>
      </div>

      <div class="heading h3">
        <a href="#compatibility">Compatibility</a>
      </div>

      <div class="heading h1">
        <a href="#installation">Installation</a>
      </div>

      <div class="heading h2">
        <a href="#mongodb-driver">MongoDB Driver</a>
      </div>

      <div class="heading h2">
        <a href="#troubleshooting">Troubleshooting</a>
      </div>

      <div class="heading h3">
        <a href="#diagnosing-on-unix">Diagnosing on UNIX</a>
      </div>

      <div class="heading h3">
        <a href="#diagnosing-on-windows">Diagnosing on Windows</a>
      </div>

      <div class="heading h3">
        <a href="#other-possible-issues">Other possible issues</a>
      </div>

      <div class="heading h2">
        <a href="#quick-start">Quick Start</a>
      </div>

      <div class="heading h3">
        <a href="#create-the-package.json-file">Create the package.json file</a>
      </div>

      <div class="heading h3">
        <a href="#start-a-mongodb-server">Start a MongoDB Server</a>
      </div>

      <div class="heading h3">
        <a href="#connect-to-mongodb">Connect to MongoDB</a>
      </div>

      <div class="heading h3">
        <a href="#insert-a-document">Insert a Document</a>
      </div>

      <div class="heading h3">
        <a href="#find-all-documents">Find All Documents</a>
      </div>

      <div class="heading h3">
        <a href="#find-documents-with-a-query-filter">Find Documents with a Query Filter</a>
      </div>

      <div class="heading h3">
        <a href="#update-a-document">Update a document</a>
      </div>

      <div class="heading h3">
        <a href="#remove-a-document">Remove a document</a>
      </div>

      <div class="heading h3">
        <a href="#index-a-collection">Index a Collection</a>
      </div>

      <div class="heading h2">
        <a href="#next-steps">Next Steps</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><p><a href="https://nodei.co/npm/mongodb/"><img src="https://nodei.co/npm/mongodb.png?downloads=true&amp;downloadRank=true" alt="npm"></a> <a href="https://nodei.co/npm/mongodb/"><img src="https://nodei.co/npm-dl/mongodb.png?months=6&amp;height=3" alt="npm"></a></p>
<p><a href="http://travis-ci.org/mongodb/node-mongodb-native"><img src="https://secure.travis-ci.org/mongodb/node-mongodb-native.svg?branch=2.1" alt="Build Status"></a>
<a href="https://coveralls.io/github/mongodb/node-mongodb-native?branch=2.1"><img src="https://coveralls.io/repos/github/mongodb/node-mongodb-native/badge.svg?branch=2.1" alt="Coverage Status"></a>
<a href="https://gitter.im/mongodb/node-mongodb-native?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Gitter"></a></p>
<div class="pilwrap" id="description">
  <h1>
    <a href="#description" name="description" class="pilcrow"></a>
Description
  </h1>
</div>
<p>The official <a href="https://www.mongodb.com/">MongoDB</a> driver for Node.js. Provides a high-level API on top of <a href="https://www.npmjs.com/package/mongodb-core">mongodb-core</a> that is meant for end users.</p>
<p><strong>NOTE: v3.x was recently released with breaking API changes. You can find a list of changes <a href="CHANGES_3.0.0.md.html">here</a>.</strong></p>
<div class="pilwrap" id="mongodb-node.js-driver">
  <h2>
    <a href="#mongodb-node.js-driver" name="mongodb-node.js-driver" class="pilcrow"></a>
MongoDB Node.JS Driver
  </h2>
</div>
<table>
<thead>
<tr>
<th>what</th>
<th>where</th>
</tr>
</thead>
<tbody>
<tr>
<td>documentation</td>
<td>http://mongodb.github.io/node-mongodb-native</td>
</tr>
<tr>
<td>api-doc</td>
<td>http://mongodb.github.io/node-mongodb-native/3.1/api</td>
</tr>
<tr>
<td>source</td>
<td>https://github.com/mongodb/node-mongodb-native</td>
</tr>
<tr>
<td>mongodb</td>
<td>http://www.mongodb.org</td>
</tr>
</tbody>
</table>
<div class="pilwrap" id="bugs-feature-requests">
  <h3>
    <a href="#bugs-feature-requests" name="bugs-feature-requests" class="pilcrow"></a>
Bugs / Feature Requests
  </h3>
</div>
<p>Think you’ve found a bug? Want to see a new feature in <code>node-mongodb-native</code>? Please open a
case in our issue management tool, JIRA:</p>
<ul>
<li>Create an account and login <a href="https://jira.mongodb.org">jira.mongodb.org</a>.</li>
<li>Navigate to the NODE project <a href="https://jira.mongodb.org/browse/NODE">jira.mongodb.org/browse/NODE</a>.</li>
<li>Click <strong>Create Issue</strong> - Please provide as much information as possible about the issue type and how to reproduce it.</li>
</ul>
<p>Bug reports in JIRA for all driver projects (i.e. NODE, PYTHON, CSHARP, JAVA) and the
Core Server (i.e. SERVER) project are <strong>public</strong>.</p>
<div class="pilwrap" id="support-feedback">
  <h3>
    <a href="#support-feedback" name="support-feedback" class="pilcrow"></a>
Support / Feedback
  </h3>
</div>
<p>For issues with, questions about, or feedback for the Node.js driver, please look into our <a href="http://www.mongodb.org/about/support">support channels</a>. Please do not email any of the driver developers directly with issues or questions - you're more likely to get an answer on the <a href="http://groups.google.com/group/mongodb-user%3E">mongodb-user</a> list on Google Groups.</p>
<div class="pilwrap" id="change-log">
  <h3>
    <a href="#change-log" name="change-log" class="pilcrow"></a>
Change Log
  </h3>
</div>
<p>Change history can be found in <a href="HISTORY.md.html"><code>HISTORY.md</code></a>.</p>
<div class="pilwrap" id="compatibility">
  <h3>
    <a href="#compatibility" name="compatibility" class="pilcrow"></a>
Compatibility
  </h3>
</div>
<p>For version compatibility matrices, please refer to the following links:</p>
<ul>
<li><a href="https://docs.mongodb.com/ecosystem/drivers/driver-compatibility-reference/#reference-compatibility-mongodb-node">MongoDB</a></li>
<li><a href="https://docs.mongodb.com/ecosystem/drivers/driver-compatibility-reference/#reference-compatibility-language-node">NodeJS</a></li>
</ul>
<div class="pilwrap" id="installation">
  <h1>
    <a href="#installation" name="installation" class="pilcrow"></a>
Installation
  </h1>
</div>
<p>The recommended way to get started using the Node.js 3.0 driver is by using the <code>npm</code> (Node Package Manager) to install the dependency in your project.</p>
<div class="pilwrap" id="mongodb-driver">
  <h2>
    <a href="#mongodb-driver" name="mongodb-driver" class="pilcrow"></a>
MongoDB Driver
  </h2>
</div>
<p>Given that you have created your own project using <code>npm init</code> we install the MongoDB driver and its dependencies by executing the following <code>npm</code> command.</p>
<pre><code class="bash">npm install mongodb --save
</code></pre>
<p>This will download the MongoDB driver and add a dependency entry in your <code>package.json</code> file.</p>
<p>You can also use the <a href="https://yarnpkg.com/en">Yarn</a> package manager.</p>
<div class="pilwrap" id="troubleshooting">
  <h2>
    <a href="#troubleshooting" name="troubleshooting" class="pilcrow"></a>
Troubleshooting
  </h2>
</div>
<p>The MongoDB driver depends on several other packages. These are:</p>
<ul>
<li><a href="https://github.com/mongodb-js/mongodb-core">mongodb-core</a></li>
<li><a href="https://github.com/mongodb/js-bson">bson</a></li>
<li><a href="https://github.com/mongodb-js/kerberos">kerberos</a></li>
<li><a href="https://github.com/nodejs/node-gyp">node-gyp</a></li>
</ul>
<p>The <code>kerberos</code> package is a C++ extension that requires a build environment to be installed on your system. You must be able to build Node.js itself in order to compile and install the <code>kerberos</code> module. Furthermore, the <code>kerberos</code> module requires the MIT Kerberos package to correctly compile on UNIX operating systems. Consult your UNIX operation system package manager for what libraries to install.</p>
<p><strong>Windows already contains the SSPI API used for Kerberos authentication. However, you will need to install a full compiler tool chain using Visual Studio C++ to correctly install the Kerberos extension.</strong></p>
<div class="pilwrap" id="diagnosing-on-unix">
  <h3>
    <a href="#diagnosing-on-unix" name="diagnosing-on-unix" class="pilcrow"></a>
Diagnosing on UNIX
  </h3>
</div>
<p>If you don’t have the build-essentials, this module won’t build. In the case of Linux, you will need gcc, g++, Node.js with all the headers and Python. The easiest way to figure out what’s missing is by trying to build the Kerberos project. You can do this by performing the following steps.</p>
<pre><code class="bash">git <span class="hljs-built_in">clone</span> https://github.com/mongodb-js/kerberos
<span class="hljs-built_in">cd</span> kerberos
npm install
</code></pre>
<p>If all the steps complete, you have the right toolchain installed. If you get the error &quot;node-gyp not found,&quot; you need to install <code>node-gyp</code> globally:</p>
<pre><code class="bash">npm install -g node-gyp
</code></pre>
<p>If it correctly compiles and runs the tests you are golden. We can now try to install the <code>mongod</code> driver by performing the following command.</p>
<pre><code class="bash"><span class="hljs-built_in">cd</span> yourproject
npm install mongodb --save
</code></pre>
<p>If it still fails the next step is to examine the npm log. Rerun the command but in this case in verbose mode.</p>
<pre><code class="bash">npm --loglevel verbose install mongodb
</code></pre>
<p>This will print out all the steps npm is performing while trying to install the module.</p>
<div class="pilwrap" id="diagnosing-on-windows">
  <h3>
    <a href="#diagnosing-on-windows" name="diagnosing-on-windows" class="pilcrow"></a>
Diagnosing on Windows
  </h3>
</div>
<p>A compiler tool chain known to work for compiling <code>kerberos</code> on Windows is the following.</p>
<ul>
<li>Visual Studio C++ 2010 (do not use higher versions)</li>
<li>Windows 7 64bit SDK</li>
<li>Python 2.7 or higher</li>
</ul>
<p>Open the Visual Studio command prompt. Ensure <code>node.exe</code> is in your path and install <code>node-gyp</code>.</p>
<pre><code class="bash">npm install -g node-gyp
</code></pre>
<p>Next, you will have to build the project manually to test it. Clone the repo, install dependencies and rebuild:</p>
<pre><code class="bash">git <span class="hljs-built_in">clone</span> https://github.com/christkv/kerberos.git
<span class="hljs-built_in">cd</span> kerberos
npm install
node-gyp rebuild
</code></pre>
<p>This should rebuild the driver successfully if you have everything set up correctly.</p>
<div class="pilwrap" id="other-possible-issues">
  <h3>
    <a href="#other-possible-issues" name="other-possible-issues" class="pilcrow"></a>
Other possible issues
  </h3>
</div>
<p>Your Python installation might be hosed making gyp break. Test your deployment environment first by trying to build Node.js itself on the server in question, as this should unearth any issues with broken packages (and there are a lot of broken packages out there).</p>
<p>Another tip is to ensure your user has write permission to wherever the Node.js modules are being installed.</p>
<div class="pilwrap" id="quick-start">
  <h2>
    <a href="#quick-start" name="quick-start" class="pilcrow"></a>
Quick Start
  </h2>
</div>
<p>This guide will show you how to set up a simple application using Node.js and MongoDB. Its scope is only how to set up the driver and perform the simple CRUD operations. For more in-depth coverage, see the <a href="docs/reference/content/tutorials/main.md.html">tutorials</a>.</p>
<div class="pilwrap" id="create-the-package.json-file">
  <h3>
    <a href="#create-the-package.json-file" name="create-the-package.json-file" class="pilcrow"></a>
Create the <code>package.json</code> file
  </h3>
</div>
<p>First, create a directory where your application will live.</p>
<pre><code class="bash">mkdir myproject
<span class="hljs-built_in">cd</span> myproject
</code></pre>
<p>Enter the following command and answer the questions to create the initial structure for your new project:</p>
<pre><code class="bash">npm init
</code></pre>
<p>Next, install the driver dependency.</p>
<pre><code class="bash">npm install mongodb --save
</code></pre>
<p>You should see <strong>NPM</strong> download a lot of files. Once it's done you'll find all the downloaded packages under the <strong>node_modules</strong> directory.</p>
<div class="pilwrap" id="start-a-mongodb-server">
  <h3>
    <a href="#start-a-mongodb-server" name="start-a-mongodb-server" class="pilcrow"></a>
Start a MongoDB Server
  </h3>
</div>
<p>For complete MongoDB installation instructions, see <a href="https://docs.mongodb.org/manual/installation/">the manual</a>.</p>
<ol>
<li>Download the right MongoDB version from <a href="https://www.mongodb.org/downloads">MongoDB</a></li>
<li>Create a database directory (in this case under <strong>/data</strong>).</li>
<li>Install and start a <code>mongod</code> process.</li>
</ol>
<pre><code class="bash">mongod --dbpath=/data
</code></pre>
<p>You should see the <strong>mongod</strong> process start up and print some status information.</p>
<div class="pilwrap" id="connect-to-mongodb">
  <h3>
    <a href="#connect-to-mongodb" name="connect-to-mongodb" class="pilcrow"></a>
Connect to MongoDB
  </h3>
</div>
<p>Create a new <strong>app.js</strong> file and add the following code to try out some basic CRUD
operations using the MongoDB driver.</p>
<p>Add code to connect to the server and the database <strong>myproject</strong>:</p>
<pre><code class="js"><span class="hljs-keyword">const</span> MongoClient = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>).MongoClient;
<span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);

<span class="hljs-comment">// Connection URL</span>
<span class="hljs-keyword">const</span> url = <span class="hljs-string">'mongodb://localhost:27017'</span>;

<span class="hljs-comment">// Database Name</span>
<span class="hljs-keyword">const</span> dbName = <span class="hljs-string">'myproject'</span>;

<span class="hljs-comment">// Use connect method to connect to the server</span>
MongoClient.connect(url, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, client</span>) </span>{
  assert.equal(<span class="hljs-literal">null</span>, err);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connected successfully to server"</span>);

  <span class="hljs-keyword">const</span> db = client.db(dbName);

  client.close();
});
</code></pre>
<p>Run your app from the command line with:</p>
<pre><code class="bash">node app.js
</code></pre>
<p>The application should print <strong>Connected successfully to server</strong> to the console.</p>
<div class="pilwrap" id="insert-a-document">
  <h3>
    <a href="#insert-a-document" name="insert-a-document" class="pilcrow"></a>
Insert a Document
  </h3>
</div>
<p>Add to <strong>app.js</strong> the following function which uses the <strong>insertMany</strong>
method to add three documents to the <strong>documents</strong> collection.</p>
<pre><code class="js"><span class="hljs-keyword">const</span> insertDocuments = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">db, callback</span>) </span>{
  <span class="hljs-comment">// Get the documents collection</span>
  <span class="hljs-keyword">const</span> collection = db.collection(<span class="hljs-string">'documents'</span>);
  <span class="hljs-comment">// Insert some documents</span>
  collection.insertMany([
    {<span class="hljs-attr">a</span> : <span class="hljs-number">1</span>}, {<span class="hljs-attr">a</span> : <span class="hljs-number">2</span>}, {<span class="hljs-attr">a</span> : <span class="hljs-number">3</span>}
  ], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
    assert.equal(err, <span class="hljs-literal">null</span>);
    assert.equal(<span class="hljs-number">3</span>, result.result.n);
    assert.equal(<span class="hljs-number">3</span>, result.ops.length);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Inserted 3 documents into the collection"</span>);
    callback(result);
  });
}
</code></pre>
<p>The <strong>insert</strong> command returns an object with the following fields:</p>
<ul>
<li><strong>result</strong> Contains the result document from MongoDB</li>
<li><strong>ops</strong> Contains the documents inserted with added <strong>_id</strong> fields</li>
<li><strong>connection</strong> Contains the connection used to perform the insert</li>
</ul>
<p>Add the following code to call the <strong>insertDocuments</strong> function:</p>
<pre><code class="js"><span class="hljs-keyword">const</span> MongoClient = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>).MongoClient;
<span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);

<span class="hljs-comment">// Connection URL</span>
<span class="hljs-keyword">const</span> url = <span class="hljs-string">'mongodb://localhost:27017'</span>;

<span class="hljs-comment">// Database Name</span>
<span class="hljs-keyword">const</span> dbName = <span class="hljs-string">'myproject'</span>;

<span class="hljs-comment">// Use connect method to connect to the server</span>
MongoClient.connect(url, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, client</span>) </span>{
  assert.equal(<span class="hljs-literal">null</span>, err);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connected successfully to server"</span>);

  <span class="hljs-keyword">const</span> db = client.db(dbName);

  insertDocuments(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    client.close();
  });
});
</code></pre>
<p>Run the updated <strong>app.js</strong> file:</p>
<pre><code class="bash">node app.js
</code></pre>
<p>The operation returns the following output:</p>
<pre><code class="bash">Connected successfully to server
Inserted 3 documents into the collection
</code></pre>
<div class="pilwrap" id="find-all-documents">
  <h3>
    <a href="#find-all-documents" name="find-all-documents" class="pilcrow"></a>
Find All Documents
  </h3>
</div>
<p>Add a query that returns all the documents.</p>
<pre><code class="js"><span class="hljs-keyword">const</span> findDocuments = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">db, callback</span>) </span>{
  <span class="hljs-comment">// Get the documents collection</span>
  <span class="hljs-keyword">const</span> collection = db.collection(<span class="hljs-string">'documents'</span>);
  <span class="hljs-comment">// Find some documents</span>
  collection.find({}).toArray(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, docs</span>) </span>{
    assert.equal(err, <span class="hljs-literal">null</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found the following records"</span>);
    <span class="hljs-built_in">console</span>.log(docs)
    callback(docs);
  });
}
</code></pre>
<p>This query returns all the documents in the <strong>documents</strong> collection. Add the <strong>findDocument</strong> method to the <strong>MongoClient.connect</strong> callback:</p>
<pre><code class="js"><span class="hljs-keyword">const</span> MongoClient = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>).MongoClient;
<span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);

<span class="hljs-comment">// Connection URL</span>
<span class="hljs-keyword">const</span> url = <span class="hljs-string">'mongodb://localhost:27017'</span>;

<span class="hljs-comment">// Database Name</span>
<span class="hljs-keyword">const</span> dbName = <span class="hljs-string">'myproject'</span>;

<span class="hljs-comment">// Use connect method to connect to the server</span>
MongoClient.connect(url, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, client</span>) </span>{
  assert.equal(<span class="hljs-literal">null</span>, err);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connected correctly to server"</span>);

  <span class="hljs-keyword">const</span> db = client.db(dbName);

  insertDocuments(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    findDocuments(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      client.close();
    });
  });
});
</code></pre>
<div class="pilwrap" id="find-documents-with-a-query-filter">
  <h3>
    <a href="#find-documents-with-a-query-filter" name="find-documents-with-a-query-filter" class="pilcrow"></a>
Find Documents with a Query Filter
  </h3>
</div>
<p>Add a query filter to find only documents which meet the query criteria.</p>
<pre><code class="js"><span class="hljs-keyword">const</span> findDocuments = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">db, callback</span>) </span>{
  <span class="hljs-comment">// Get the documents collection</span>
  <span class="hljs-keyword">const</span> collection = db.collection(<span class="hljs-string">'documents'</span>);
  <span class="hljs-comment">// Find some documents</span>
  collection.find({<span class="hljs-string">'a'</span>: <span class="hljs-number">3</span>}).toArray(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, docs</span>) </span>{
    assert.equal(err, <span class="hljs-literal">null</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found the following records"</span>);
    <span class="hljs-built_in">console</span>.log(docs);
    callback(docs);
  });
}
</code></pre>
<p>Only the documents which match <code>'a' : 3</code> should be returned.</p>
<div class="pilwrap" id="update-a-document">
  <h3>
    <a href="#update-a-document" name="update-a-document" class="pilcrow"></a>
Update a document
  </h3>
</div>
<p>The following operation updates a document in the <strong>documents</strong> collection.</p>
<pre><code class="js"><span class="hljs-keyword">const</span> updateDocument = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">db, callback</span>) </span>{
  <span class="hljs-comment">// Get the documents collection</span>
  <span class="hljs-keyword">const</span> collection = db.collection(<span class="hljs-string">'documents'</span>);
  <span class="hljs-comment">// Update document where a is 2, set b equal to 1</span>
  collection.updateOne({ <span class="hljs-attr">a</span> : <span class="hljs-number">2</span> }
    , { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">b</span> : <span class="hljs-number">1</span> } }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
    assert.equal(err, <span class="hljs-literal">null</span>);
    assert.equal(<span class="hljs-number">1</span>, result.result.n);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Updated the document with the field a equal to 2"</span>);
    callback(result);
  });
}
</code></pre>
<p>The method updates the first document where the field <strong>a</strong> is equal to <strong>2</strong> by adding a new field <strong>b</strong> to the document set to <strong>1</strong>. Next, update the callback function from <strong>MongoClient.connect</strong> to include the update method.</p>
<pre><code class="js"><span class="hljs-keyword">const</span> MongoClient = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>).MongoClient;
<span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);

<span class="hljs-comment">// Connection URL</span>
<span class="hljs-keyword">const</span> url = <span class="hljs-string">'mongodb://localhost:27017'</span>;

<span class="hljs-comment">// Database Name</span>
<span class="hljs-keyword">const</span> dbName = <span class="hljs-string">'myproject'</span>;

<span class="hljs-comment">// Use connect method to connect to the server</span>
MongoClient.connect(url, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, client</span>) </span>{
  assert.equal(<span class="hljs-literal">null</span>, err);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connected successfully to server"</span>);

  <span class="hljs-keyword">const</span> db = client.db(dbName);

  insertDocuments(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    updateDocument(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      client.close();
    });
  });
});
</code></pre>
<div class="pilwrap" id="remove-a-document">
  <h3>
    <a href="#remove-a-document" name="remove-a-document" class="pilcrow"></a>
Remove a document
  </h3>
</div>
<p>Remove the document where the field <strong>a</strong> is equal to <strong>3</strong>.</p>
<pre><code class="js"><span class="hljs-keyword">const</span> removeDocument = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">db, callback</span>) </span>{
  <span class="hljs-comment">// Get the documents collection</span>
  <span class="hljs-keyword">const</span> collection = db.collection(<span class="hljs-string">'documents'</span>);
  <span class="hljs-comment">// Delete document where a is 3</span>
  collection.deleteOne({ <span class="hljs-attr">a</span> : <span class="hljs-number">3</span> }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
    assert.equal(err, <span class="hljs-literal">null</span>);
    assert.equal(<span class="hljs-number">1</span>, result.result.n);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Removed the document with the field a equal to 3"</span>);
    callback(result);
  });
}
</code></pre>
<p>Add the new method to the <strong>MongoClient.connect</strong> callback function.</p>
<pre><code class="js"><span class="hljs-keyword">const</span> MongoClient = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>).MongoClient;
<span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);

<span class="hljs-comment">// Connection URL</span>
<span class="hljs-keyword">const</span> url = <span class="hljs-string">'mongodb://localhost:27017'</span>;

<span class="hljs-comment">// Database Name</span>
<span class="hljs-keyword">const</span> dbName = <span class="hljs-string">'myproject'</span>;

<span class="hljs-comment">// Use connect method to connect to the server</span>
MongoClient.connect(url, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, client</span>) </span>{
  assert.equal(<span class="hljs-literal">null</span>, err);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connected successfully to server"</span>);

  <span class="hljs-keyword">const</span> db = client.db(dbName);

  insertDocuments(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    updateDocument(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      removeDocument(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        client.close();
      });
    });
  });
});
</code></pre>
<div class="pilwrap" id="index-a-collection">
  <h3>
    <a href="#index-a-collection" name="index-a-collection" class="pilcrow"></a>
Index a Collection
  </h3>
</div>
<p><a href="https://docs.mongodb.org/manual/indexes/">Indexes</a> can improve your application's
performance. The following function creates an index on the <strong>a</strong> field in the
<strong>documents</strong> collection.</p>
<pre><code class="js"><span class="hljs-keyword">const</span> indexCollection = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">db, callback</span>) </span>{
  db.collection(<span class="hljs-string">'documents'</span>).createIndex(
    { <span class="hljs-string">"a"</span>: <span class="hljs-number">1</span> },
      <span class="hljs-literal">null</span>,
      <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, results</span>) </span>{
        <span class="hljs-built_in">console</span>.log(results);
        callback();
    }
  );
};
</code></pre>
<p>Add the <code>indexCollection</code> method to your app:</p>
<pre><code class="js"><span class="hljs-keyword">const</span> MongoClient = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>).MongoClient;
<span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);

<span class="hljs-comment">// Connection URL</span>
<span class="hljs-keyword">const</span> url = <span class="hljs-string">'mongodb://localhost:27017'</span>;

<span class="hljs-keyword">const</span> dbName = <span class="hljs-string">'myproject'</span>;

<span class="hljs-comment">// Use connect method to connect to the server</span>
MongoClient.connect(url, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, client</span>) </span>{
  assert.equal(<span class="hljs-literal">null</span>, err);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connected successfully to server"</span>);

  <span class="hljs-keyword">const</span> db = client.db(dbName);

  insertDocuments(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    indexCollection(db, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      client.close();
    });
  });
});
</code></pre>
<p>For more detailed information, see the <a href="docs/reference/content/tutorials/main.md.html">tutorials</a>.</p>
<div class="pilwrap" id="next-steps">
  <h2>
    <a href="#next-steps" name="next-steps" class="pilcrow"></a>
Next Steps
  </h2>
</div>
<ul>
<li><a href="http://mongodb.org">MongoDB Documentation</a></li>
<li><a href="http://learnmongodbthehardway.com">Read about Schemas</a></li>
<li><a href="https://github.com/mongodb/node-mongodb-native">Star us on GitHub</a></li>
</ul>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p><a href="LICENSE.md.html">Apache 2.0</a></p>
<p>© 2009-2012 Christian Amor Kvalheim<br>
© 2012-present MongoDB <a href="CONTRIBUTORS.md.html">Contributors</a></p>
</div>
  </div>
</body>
</html>
